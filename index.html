<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ðŸ’– Cross Stitch Frame Fit Calculator for Jen ðŸ’–</title>

  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      padding: 24px;
      max-width: 1000px;
      margin: auto;
    }

    h2 {
      margin-bottom: 24px;
    }

    label, input {
      font-weight: bold;
    }

    label {
      display: inline-block;
      margin-right: 16px;
      margin-bottom: 12px;
    }

    input {
      width: 90px;
      margin-left: 6px;
    }

    table {
      border-collapse: collapse;
      margin-top: 20px;
      width: 100%;
    }

    th, td {
      border: 1px solid #ccc;
      padding: 8px 10px;
      vertical-align: top;
    }

    th {
      background: #f3f3f3;
    }

    .diagram {
      margin-bottom: 8px;
    }

    .frame-label {
      font-size: 12px;
      margin-bottom: 2px;
    }

    .aida-count {
      font-weight: bold;
      font-size: 1.2em;
    }
  </style>
</head>

<body>

<h2>ðŸ’–âœ¨ Cross Stitch Frame Fit Calculator for Jen âœ¨ðŸ’–</h2>

<label>
  Stitch width:
  <input id="stitchW" type="number" value="200">
</label>

<label>
  Stitch height:
  <input id="stitchH" type="number" value="250">
</label>

<label>
  Minimum Margin (inches per side):
  <input id="margin" type="number" value="1" step="0.25">
</label>

<table id="results"></table>

<script>
/* ===== CONFIG ===== */
const aidaCounts = [11, 14, 16, 18];

const frames = [
  [4, 6],
  [5, 7],
  [8, 10],
  [8.5, 11],
  [11, 14],
  [16, 20]
];

const SVG_SIZE = 120;

/* ===== HELPERS ===== */
function makeDiagram(frameW, frameH, stitchW, stitchH) {
  const scale = SVG_SIZE / Math.max(frameW, frameH);

  const fw = frameW * scale;
  const fh = frameH * scale;
  const sw = stitchW * scale;
  const sh = stitchH * scale;

  const offsetX = (fw - sw) / 2;
  const offsetY = (fh - sh) / 2;

  const marginX = ((fw / scale) - stitchW) / 2; // horizontal margin in inches
  const marginY = ((fh / scale) - stitchH) / 2; // vertical margin in inches

  return `
    <div class="diagram">
      <svg width="${fw}" height="${fh}">
        <!-- Frame -->
        <rect x="0" y="0" width="${fw}" height="${fh}" fill="#eee" stroke="#555" />
        <!-- Stitched area -->
        <rect x="${offsetX}" y="${offsetY}" width="${sw}" height="${sh}" fill="#ff69b4" opacity="0.85" />
        <!-- Horizontal margin at bottom -->
        <text x="${fw / 2}" y="${fh - 2}" font-size="10" text-anchor="middle" fill="#333">
          ${marginX.toFixed(1)}"
        </text>
        <!-- Vertical margin on right -->
        <text x="${fw - 2}" y="${fh / 2}" font-size="10" text-anchor="end" dominant-baseline="middle" fill="#333">
          ${marginY.toFixed(1)}"
        </text>
      </svg>
    </div>
  `;
}

/* ===== LOGIC ===== */
function update() {
  const stitchW = Number(document.getElementById("stitchW").value);
  const stitchH = Number(document.getElementById("stitchH").value);
  const margin = Number(document.getElementById("margin").value);

  let html = `
    <tr>
      <th>Aida</th>
      <th>Stitched Size (in)</th>
      <th>With Margins (in)</th>
      <th>Resulting Margins (per side)</th>
      <th>Visual</th>
    </tr>
  `;

  aidaCounts.forEach(count => {
    const stitchedW = stitchW / count;
    const stitchedH = stitchH / count;

    const totalW = stitchedW + margin * 2;
    const totalH = stitchedH + margin * 2;

    let margins = [];
    let visuals = [];

    frames.forEach(([fw, fh]) => {
      let normal = totalW <= fw && totalH <= fh;
      let rotated = totalW <= fh && totalH <= fw;

      if (normal || rotated) {
        const frameW = normal ? fw : fh;
        const frameH = normal ? fh : fw;

        const marginX = (frameW - stitchedW) / 2;
        const marginY = (frameH - stitchedH) / 2;

        margins.push(`${fw}Ã—${fh}: ${marginX.toFixed(2)}â€³ Ã— ${marginY.toFixed(2)}â€³`);

        visuals.push(`
          <div>
            <div class="frame-label">${fw}Ã—${fh}</div>
            ${makeDiagram(frameW, frameH, stitchedW, stitchedH)}
          </div>
        `);
      }
    });

    html += `
      <tr>
        <td class="aida-count">${count}</td>
        <td>${stitchedW.toFixed(2)} Ã— ${stitchedH.toFixed(2)}</td>
        <td>${totalW.toFixed(2)} Ã— ${totalH.toFixed(2)}</td>
        <td>${margins.join("<br>") || "â€”"}</td>
        <td>${visuals.join("") || "â€”"}</td>
      </tr>
    `;
  });

  document.getElementById("results").innerHTML = html;
}

/* ===== EVENTS ===== */
["stitchW", "stitchH", "margin"].forEach(id =>
  document.getElementById(id).addEventListener("input", update)
);

update();
</script>

</body>
</html>
