<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ðŸ’– Cross Stitch Frame Fit Calculator for Jen ðŸ’–</title>

  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      padding: 24px;
      max-width: 1000px;
      margin: auto;
      position: relative;
      overflow-x: hidden;
      overflow-y: auto;
      background: radial-gradient(circle at top, #fff0f8, #ffffff 60%);
    }

    /* ===== Sticky header + inputs ===== */
    .sticky-bar {
      position: sticky;
      top: 0;
      z-index: 10;
      background: rgba(255, 240, 248, 0.96);
      backdrop-filter: blur(6px);
      padding: 16px 0 12px;
      border-bottom: 1px solid #f2cfe1;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }

    h2 {
      margin: 0;
      position: relative;
      display: block;
    }

    /* Inputs in a single row */
    .inputs {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-top: 12px;
      align-items: end;
    }

    label {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-weight: bold;
      gap: 8px;
    }

    input {
      width: 80px;
      border-radius: 8px;
      border: 1px solid #ccc;
      padding: 4px 6px;
      font-weight: bold;
    }

    /* ===== Results area ===== */
    .results-wrapper {
      max-height: 65vh;
      overflow-y: auto;
      margin-top: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 14px rgba(0,0,0,0.08);
      scroll-margin-top: 160px;
    }

    table {
      border-collapse: collapse;
      width: 100%;
      background: white;
    }

    th, td {
      border: 1px solid #ccc;
      padding: 8px 10px;
      vertical-align: top;
    }

    th {
      background: #f3f3f3;
      position: sticky;
      top: 0;
      z-index: 2;
    }

    tbody tr:hover {
      background-color: #fff6fb;
      transition: background-color 0.2s ease;
    }

    .aida-count {
      font-weight: bold;
      font-size: 1.3em;
      background: linear-gradient(135deg, #ffe0ef, #fff);
      border-radius: 8px;
      padding: 6px 10px;
      display: inline-block;
    }

    .diagram {
      margin-bottom: 8px;
    }

    .diagram svg {
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }

    .frame-label {
      font-size: 12px;
      margin-bottom: 2px;
      text-align: center;
    }

    /* ===== Sparkles ===== */
    @keyframes twinkle {
      0%, 100% { opacity: 0.3; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.5); }
    }

    .sparkle-star {
      position: absolute;
      font-size: 14px;
      pointer-events: none;
      animation: twinkle 1.5s ease-in-out infinite;
    }
  </style>
</head>

<body>

<div class="sticky-bar">
  <h2 id="header-text">ðŸ’–âœ¨ Cross Stitch Frame Fit Calculator for Jen âœ¨ðŸ’–</h2>

  <div class="inputs">
    <label>
      Stitch width
      <input id="stitchW" type="number" value="200">
    </label>

    <label>
      Stitch height
      <input id="stitchH" type="number" value="250">
    </label>

    <label>
      Margin (in / side)
      <input id="margin" type="number" value="1" step="0.25">
    </label>
  </div>
</div>

<div class="results-wrapper">
  <table id="results"></table>
</div>

<script>
/* ===== CONFIG ===== */
const aidaCounts = [11, 14, 16, 18];

const frames = [
  [4, 6],
  [5, 7],
  [8, 10],
  [8.5, 11],
  [11, 14],
  [16, 20]
];

const SVG_SIZE = 120;

/* ===== HELPERS ===== */
function makeDiagram(frameW, frameH, stitchW, stitchH) {
  const scale = SVG_SIZE / Math.max(frameW, frameH);

  const fw = frameW * scale;
  const fh = frameH * scale;
  const sw = stitchW * scale;
  const sh = stitchH * scale;

  const offsetX = (fw - sw) / 2;
  const offsetY = (fh - sh) / 2;

  const marginX = ((fw / scale) - stitchW) / 2;
  const marginY = ((fh / scale) - stitchH) / 2;

  return `
    <div class="diagram">
      <svg width="${fw}" height="${fh}">
        <rect x="0" y="0" width="${fw}" height="${fh}" fill="#eee" stroke="#555" />
        <rect x="${offsetX}" y="${offsetY}" width="${sw}" height="${sh}" fill="#ff69b4" opacity="0.85" />
        <text x="${fw / 2}" y="${fh - 2}" font-size="10" text-anchor="middle" fill="#333">
          ${marginX.toFixed(1)}"
        </text>
        <text x="${fw - 2}" y="${fh / 2}" font-size="10" text-anchor="end" dominant-baseline="middle" fill="#333">
          ${marginY.toFixed(1)}"
        </text>
      </svg>
    </div>
  `;
}

/* ===== LOGIC ===== */
function update() {
  const stitchW = Number(document.getElementById("stitchW").value);
  const stitchH = Number(document.getElementById("stitchH").value);
  const margin = Number(document.getElementById("margin").value);

  let html = `
    <tr>
      <th>Aida</th>
      <th>Stitched Size (in)</th>
      <th>With Margins (in)</th>
      <th>Resulting Margins (per side)</th>
      <th>Visual</th>
    </tr>
  `;

  aidaCounts.forEach(count => {
    const stitchedW = stitchW / count;
    const stitchedH = stitchH / count;
    const totalW = stitchedW + margin * 2;
    const totalH = stitchedH + margin * 2;

    let margins = [];
    let visuals = [];

    frames.forEach(([fw, fh]) => {
      const normal = totalW <= fw && totalH <= fh;
      const rotated = totalW <= fh && totalH <= fw;

      if (normal || rotated) {
        const frameW = normal ? fw : fh;
        const frameH = normal ? fh : fw;

        const marginX = (frameW - stitchedW) / 2;
        const marginY = (frameH - stitchedH) / 2;

        margins.push(`${fw}Ã—${fh}: ${marginX.toFixed(2)}â€³ Ã— ${marginY.toFixed(2)}â€³`);
        visuals.push(`
          <div>
            <div class="frame-label">${fw}Ã—${fh}</div>
            ${makeDiagram(frameW, frameH, stitchedW, stitchedH)}
          </div>
        `);
      }
    });

    html += `
      <tr>
        <td><span class="aida-count">${count}</span></td>
        <td>${stitchedW.toFixed(2)} Ã— ${stitchedH.toFixed(2)}</td>
        <td>${totalW.toFixed(2)} Ã— ${totalH.toFixed(2)}</td>
        <td>${margins.join("<br>") || "â€”"}</td>
        <td>${visuals.join("") || "â€”"}</td>
      </tr>
    `;
  });

  document.getElementById("results").innerHTML = html;
}

/* ===== EVENTS ===== */
["stitchW", "stitchH", "margin"].forEach(id =>
  document.getElementById(id).addEventListener("input", update)
);

update();

/* ===== SPARKLES ===== */
function createSparkles() {
  const header = document.getElementById('header-text');
  const rect = header.getBoundingClientRect();

  for (let i = 0; i < 15; i++) {
    const star = document.createElement('span');
    star.className = 'sparkle-star';
    star.textContent = 'âœ¨';
    star.style.left = `${rect.left + Math.random() * rect.width}px`;
    star.style.top = `${rect.top + Math.random() * rect.height}px`;
    star.style.animationDelay = `${Math.random() * 2}s`;
    document.body.appendChild(star);
  }
}

window.addEventListener('load', createSparkles);
</script>

</body>
</html>
